{{ header }} {{column_left}}
<div id="content">
    <div class="page-header">
        <div class="container-fluid">
            <div class="pull-right">
                <button type="submit" form="form-novalnet-global-configuration" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
                <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a>
            </div>
            <h1>{{ novalnet_heading_title }}</h1>
            <ul class="breadcrumb">
                {% for breadcrumb in breadcrumbs %}
                <li><a href="{{ breadcrumb.href }} ">{{ breadcrumb.text }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="container-fluid">
        {% if error_warning %}
        <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
            <button type="button" class="close" data-dismiss="alert">&times;</button>
        </div>
        {% endif %}
        <div class="panel panel-default">
            <script src="view/javascript/novalnet/novalnet_admin.js" type="text/javascript"></script>
            <div class="panel-heading">
                <h4>
                    {{ entry_admin_portal_src }} <br/>
                    {{ entry_paypal_admin_portal_src }}
                </h4>
            </div>
            <div class="panel-body">
                <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-novalnet-global-configuration" class="form-horizontal">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#tab-configuration" data-toggle="tab">{{ novalnet_heading_title }}</a></li>
                        <li><a href="#tab-onhold-management" data-toggle="tab">{{ entry_onhold_management }}</a></li>
                        <li><a href="#tab-merchant-script" data-toggle="tab">{{ entry_merchant_script_management }}</a></li>
                    </ul>
                    <input type="hidden" name="payment_novalnet_status" id="input-payment-novalnet-status" value="1"/>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab-configuration">
                            <div class="form-group required">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-public-key" style="font-size: 12px;"><span data-toggle="tooltip" title="{{ entry_product_activation_key_desc }}">{{ entry_product_activation_key }}</span></label>
                                <div class="col-sm-10">
                                    <input type="text" name="payment_novalnet_public_key" id="input-payment-novalnet-public-key" value="{{ payment_novalnet_public_key |trim }}" class="form-control"/>
                                    {% if error_warning and error_warning_id == 'payment_novalnet_public_key' %}
                                     <div class="text-danger">{{ error_warning }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group nn_payment_hide">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-merchant-id">{{ entry_merchant_id }}</label>
                                <div class="col-sm-10">
                                    <input type="text" name="payment_novalnet_merchant_id" id="input-payment-novalnet-merchant-id" value="{{ payment_novalnet_merchant_id }}" class="form-control" readonly/>
                                </div>
                            </div>
                            <div class="form-group nn_payment_hide">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-authcode">{{ entry_authcode }}</label>
                                <div class="col-sm-10">
                                    <input type="text" name="payment_novalnet_authcode" id="input-payment-novalnet-authcode" value="{{ payment_novalnet_authcode}}" class="form-control" readonly/>
                                </div>
                            </div>
                            <div class="form-group nn_payment_hide">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-project-id">{{ entry_project_id }}</label>
                                <div class="col-sm-10">
                                    <input type="text" name="payment_novalnet_project_id" id="input-payment-novalnet-project-id" value="{{ payment_novalnet_project_id }}" class="form-control" readonly/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-tariff-id"><span data-toggle="tooltip" title="{{ entry_tariff_desc }}">{{ entry_tariff }}</span></label>
                                <div class="col-sm-10">
                                    <input type="text" name="payment_novalnet_tariff_id" id="input-payment-novalnet-tariff-id" value="{{ payment_novalnet_tariff_id }}" class="form-control"/>
                                    {% if error_warning and error_warning_id == 'novalnet_tariff_id' %}
                                    <div class="text-danger">{{ error_warning }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group nn_payment_hide">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-access-key">{{ entry_payment_access_key }}</label>
                                <div class="col-sm-10">
                                    <input type="text" name="payment_novalnet_access_key" id="input-payment-novalnet-access-key" value="{{ payment_novalnet_access_key }}" class="form-control" readonly/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-proxy"><span data-toggle="tooltip" title="{{ entry_proxy_server_desc }}" >{{ entry_proxy_server }}</span></label>
                                <div class="col-sm-10">
                                    <input type="text" name="payment_novalnet_proxy" id="input-payment-novalnet-proxy" value="{{ payment_novalnet_proxy }}" class="form-control"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-curl-timeout"><span data-toggle="tooltip" title="{{ entry_gateway_timeout_desc }}">{{ entry_gateway_timeout }}</span></label>
                                <div class="col-sm-10">
                                    {% if payment_novalnet_curl_timeout is not empty %}
                                    <input type="text" name="payment_novalnet_curl_timeout" id="input-payment-novalnet-curl-timeout" value="{{ payment_novalnet_curl_timeout }}" class="form-control"/>
                                    {% else %}
                                    <input type="text" name="payment_novalnet_curl_timeout" id="input-payment-novalnet-curl-timeout" value="240" class="form-control"/>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-payment-logo"><span data-toggle="tooltip" title="{{ entry_payment_logo_desc }}">{{ entry_payment_logo }}</span></label>
                                <div class="col-sm-10">
                                    <select name="payment_novalnet_payment_logo" id="input-payment-novalnet-payment-logo" class="form-control">
                                        <option value="1" {% if (payment_novalnet_payment_logo == "1" or novalnet_payment_logo == " ") %} selected="selected" {% endif %} >{{ text_true }}</option>
                                        <option value="0" {% if payment_novalnet_payment_logo == "0" %}  selected="selected" {% endif %}>{{ text_false }}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-cron-job-url"><span data-toggle="tooltip" title="{{ entry_cron_job_url_desc }}">{{ entry_cron_job_url }}</span></label>
                                <div class="col-sm-10">
                                    {% if payment_novalnet_cron_job_url is not empty %}
                                    <input type="text" name="payment_novalnet_cron_job_url" id="input-payment-novalnet-cron-job-url" value="{{ payment_novalnet_cron_job_url }}" class="form-control" readonly=readonly/>
                                    {% else %}
                                    <input type="text" name="payment_novalnet_cron_job_url" id="input-payment-novalnet-cron-job-url" value="{{ cron_job_url }}" class="form-control" readonly=readonly/>
                                    {% endif %}
                                </div>
                            </div>
                             <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-referrer-id"><span data-toggle="tooltip" title="{{ entry_referrer_id_desc }}">{{ entry_referrer_id }}</span></label>
                                <div class="col-sm-10">
                                    <input type="number" name="payment_novalnet_referrer_id" id ="input-payment-novalnet-referrer-id" value="{{ payment_novalnet_referrer_id }}" class="form-control"/>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab-onhold-management">
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-onhold-complete-status">{{ entry_onhold_confirm_status }}</label>
                                <div class="col-sm-10">
                                {% if payment_novalnet_onhold_complete_status is empty %}
                                {% set payment_novalnet_onhold_complete_status = 2 %}
                                {% endif %}
                                    <select name="payment_novalnet_onhold_complete_status" id="input-payment-novalnet-onhold-complete-status" class="form-control">
                                        {% for order_status in order_statuses %}
                                        <option value="{{ order_status.order_status_id }}" {% if order_status.order_status_id == payment_novalnet_onhold_complete_status %} selected="selected" {% endif %} >{{ order_status.name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-onhold-cancel-status">{{ entry_onhold_cancel_status }}</label>
                                <div class="col-sm-10">
                                {% if payment_novalnet_cancel_status is empty %}
                                {% set payment_novalnet_cancel_status = 7 %}
                                {% endif %}
                                    <select name="payment_novalnet_cancel_status" id="input-payment-novalnet-onhold-cancel-status" class="form-control">
                                        {% for order_status in order_statuses %}
                                        <option value="{{ order_status.order_status_id }}" {% if order_status.order_status_id == payment_novalnet_cancel_status %}  selected="selected" {% endif %} > {{ order_status.name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab-merchant-script">
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-callback-test-mode"><span data-toggle="tooltip" title="{{ entry_merchant_script_test_mode_desc }}">{{ entry_merchant_script_test_mode }}</span></label>
                                <div class="col-sm-10">
                                    <select name="payment_novalnet_callback_testmode" id="input-payment-novalnet-callback-test-mode" class="form-control">
                                        <option value="yes"  {% if payment_novalnet_callback_testmode == 'yes' %} selected="selected" {% endif %}>{{ text_true }}</option>
                                        <option value="no" {% if (payment_novalnet_callback_testmode == 'no' or payment_novalnet_callback_testmode == '') %} selected="selected" {% endif %} >{{ text_false }}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-callback-mail">{{ entry_merchant_script_mail_notification }}</label>
                                <div class="col-sm-10">
                                    <select name="payment_novalnet_callback_mail" id="input-payment-novalnet-callback-mail" class="form-control">
                                        <option value="yes" {% if payment_novalnet_callback_mail == 'yes' %} selected="selected" {% endif %} >{{ text_true }}</option>
                                        <option value="no" {% if (payment_novalnet_callback_mail == 'no' or payment_novalnet_callback_mail == '') %} selected="selected" {% endif %} >{{ text_false }}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-callback-to-addr"><span data-toggle="tooltip" title="{{ entry_email_to_addr_desc }}">{{ entry_email_to_addr }}</span></label>
                                <div class="col-sm-10">
                                    <input type="email" name="payment_novalnet_callback_to_addr" id="input-payment-novalnet-callback-to-addr" value="{{ payment_novalnet_callback_to_addr }}" class="form-control"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-payment-novalnet-callback-bcc-addr"><span data-toggle="tooltip" title="{{ entry_email_bcc_addr_desc }}">{{ entry_email_bcc_addr }}</span></label>
                                <div class="col-sm-10">
                                    <input type="email" name="payment_novalnet_callback_bcc_addr" id="input-payment-novalnet-callback-bcc-addr" value="{{ payment_novalnet_callback_bcc_addr }}" class="form-control"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="input-novalnet-callback-notification-url"><span data-toggle="tooltip" title="{{ entry_notification_url_desc }}">{{ entry_notification_url }}</span></label>
                                <div class="col-sm-10">
                                    {% if payment_novalnet_notification_url is not empty %}
                                    <input type="text" name="payment_novalnet_notification_url" id="input-novalnet-callback-notification-url" value="{{ payment_novalnet_notification_url }}" class="form-control"/>
                                    {% else %}
                                    <input type="text" name="payment_novalnet_notification_url" id="input-novalnet-callback-notification-url" value="{{ default_callback_url }}" class="form-control"/>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <input id="server_ip" type="hidden" value='{{ server_ip }}' />
                    <input id="remote_ip" type="hidden" value='{{ remote_ip }}' />
                    <input id="ajax_complete" type="hidden" value='false' />
                    <input id="nn_language" type="hidden" value='{{ language }}' />
                    <input id="error_mandatory_fields" type="hidden" name="error_mandatory_fields" value='{{ error_mandatory_fields }}' />
                </form>
            </div>
        </div>
    </div>
</div>
{{ footer }}
<script>
    $('#form-novalnet-global-configuration').submit(function(event) {
        if ($('#ajax_complete').val() == 'false') { // Get response from server then only have to save the Novalnet configurations.
            var self = this;
            event.preventDefault();
            $(document).ajaxComplete(function(event, request, settings){ // After completing the ajax then proceed default submit process.
                self.submit();
            });
        }
    });
    $(document).ready(function(){    
        $(".nn_payment_hide").hide();
        
        
        
    });
</script>
